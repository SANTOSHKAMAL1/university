<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Edit Newsletter</title>
  <script src="https://cdn.tailwindcss.com"></script>
   <!-- TinyMCE -->
  <script src="https://cdn.tiny.cloud/1/dajtx6n0n4g72ax5rev4uzy9j04aniffnzb8s4bgz1tw5v1w/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
  <script>
    tinymce.init({
      selector: '#description',
      menubar: false,
      plugins: 'link image lists',
      toolbar: 'undo redo | styles | bold italic underline | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image'
    });
  </script>
</head>
<body class="bg-gray-100 p-6">
  <div class="max-w-4xl mx-auto bg-white p-8 rounded-xl shadow-md">
    <h2 class="text-2xl font-semibold mb-6">Edit Newsletter</h2>

    <form action="/update_newsletter/{{ record._id }}" method="POST" enctype="multipart/form-data" class="space-y-6">
      <div>
        <label for="title" class="block font-semibold mb-2">Title</label>
        <input type="text" name="title" id="title" value="{{ record.title }}" required class="w-full px-4 py-3 border border-gray-300 rounded-lg">
      </div>

      <div>
        <label for="description" class="block font-semibold mb-2">Description</label>
        <textarea name="description" id="description" rows="10">{{ record.description|safe }}</textarea>
      </div>

      <div>
        <label for="tags" class="block font-semibold mb-2">Tags</label>
        <select name="tags" id="tags" multiple class="w-full px-4 py-3 border border-gray-300 rounded-lg">
          {% for tag in ['education', 'sports', 'cultural', 'forum', 'meeting', 'university events', 'fest', 'festival'] %}
            <option value="{{ tag }}" {% if tag in record.tags %}selected{% endif %}>{{ tag }}</option>
          {% endfor %}
        </select>
      </div>

      <div>
        <label class="block font-semibold mb-2">Current Image</label>
        {% if record.image %}
          <img src="{{ url_for('uploaded_file', filename=record.image) }}" alt="Image" class="w-48 mb-4">
        {% endif %}
        <input type="file" name="image" class="block w-full">
      </div>

      <div>
        <label for="recipient_email" class="block font-semibold mb-2">Recipient Emails</label>
        <textarea name="recipient_email" id="recipient_email" rows="4" placeholder="Enter emails separated by commas" class="w-full px-4 py-3 border border-gray-300 rounded-lg">{{ record.recipients | join(', ') }}</textarea>
      </div>

      <div class="flex justify-between">
        <button type="submit" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition">Update</button>
        <a href="/delete_newsletter/{{ record._id }}" class="text-red-500 hover:underline">Delete Newsletter</a>
      </div>
    </form>
  </div>
</body>
</html>
